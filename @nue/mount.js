var P=Object.create;var{getPrototypeOf:Q,defineProperty:K,getOwnPropertyNames:R}=Object;var S=Object.prototype.hasOwnProperty;var M=(k,C,q)=>{q=k!=null?P(Q(k)):{};let B=C||!k||!k.__esModule?K(q,"default",{value:k,enumerable:!0}):q;for(let z of R(k))if(!S.call(B,z))K(B,z,{get:()=>k[z],enumerable:!0});return B};var N=((k)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(k,{get:(C,q)=>(typeof require!=="undefined"?require:C)[q]}):k)(function(k){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+k+'" is not supported')});var I=[],T=0;async function O(k){let C=document.querySelector('[name="nue:components"]')?.getAttribute("content");if(!C)return[];let q=[];for(let B of C.split(" "))if(B){if(B==k)B+=`?${++T}`;let{lib:z}=await import(B);if(z)q.push(...z)}return q}async function W(k,C,q){let{createApp:B}=await import("./nue.js"),z=await O(),D=z.find((G)=>G.name==k);if(!D)return;let F=B(D,q,z).mount(C);return F.root.setAttribute("custom",k),F}async function U(k){let C=document.querySelectorAll("[custom]"),q=C[0]?await O(k):[];if(!q[0])return;let{createApp:B}=await import("./nue.js");for(let z of[...C]){let D=z.getAttribute("custom"),F=z.nextElementSibling,G=F?.type=="application/json"?JSON.parse(F.textContent):{},J=q.find((H)=>H.name==D);if(J){let H=B(J,G,q).mount(z);I.push(H)}else if(customElements.get(D));else console.error(`Component not defined: "${D}"`)}}async function X(){I.forEach((k)=>k.unmount()),I=[]}addEventListener("route",()=>U());addEventListener("DOMContentLoaded",()=>dispatchEvent(new Event("route")));export{X as unmountAll,U as mountAll,W as mount};
